<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-02-22 Fri 11:58 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CS 382 Lab 8: Introduction to fragments</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Adam Lewis" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">CS 382 Lab 8: Introduction to fragments</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgc546799">1. Objectives:</a></li>
<li><a href="#orgaf3edb2">2. Background</a></li>
<li><a href="#org98019b2">3. Instructions</a>
<ul>
<li><a href="#org87e5eba">3.1. Configuring the activity to use fragments</a></li>
<li><a href="#org4fd0e06">3.2. Adding fragments</a>
<ul>
<li><a href="#orge8a5e03">3.2.1. Defining the look-and-feel of a fragment</a></li>
<li><a href="#org23e015a">3.2.2. Implementing the "code-behind"</a></li>
</ul>
</li>
<li><a href="#orgc8323b2">3.3. Expanding the model</a>
<ul>
<li><a href="#orga95ca46">3.3.1. Now back to our Fragment for the momement</a></li>
</ul>
</li>
<li><a href="#org791f3b8">3.4. And now we add modify the activity</a></li>
</ul>
</li>
<li><a href="#orge4d9845">4. Submit your lab for grading</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgc546799" class="outline-2">
<h2 id="orgc546799"><span class="section-number-2">1</span> Objectives:</h2>
<div class="outline-text-2" id="text-1">
<ol class="org-ol">
<li>Construct an application that uses UI Fragments.</li>
<li>Understand aspects of the Fragment Lifecycle</li>
</ol>
</div>
</div>
<div id="outline-container-orgaf3edb2" class="outline-2">
<h2 id="orgaf3edb2"><span class="section-number-2">2</span> Background</h2>
<div class="outline-text-2" id="text-2">
<p>
Today we will prove a point that many of you have long suspected about
your Glorious Instructor: he assigns grades at random.  This is the
first of a set of labs illustrating use of the user interface
components of the Android class library.
</p>
</div>
</div>
<div id="outline-container-org98019b2" class="outline-2">
<h2 id="org98019b2"><span class="section-number-2">3</span> Instructions</h2>
<div class="outline-text-2" id="text-3">
<p>
Start the process by create a project with an empty activity.
Name your application to be "Grade Generator" and rename the main
activity to be "GradeActivity".
</p>
</div>
<div id="outline-container-org87e5eba" class="outline-3">
<h3 id="org87e5eba"><span class="section-number-3">3.1</span> Configuring the activity to use fragments</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Open the layout resource for main application and replace the
linear layout with the following Frame Layout
</p>
<div class="org-src-container">
<pre class="src src-XML">&lt;FrameLayout xmlns:android =" http://schemas.android.com/apk res/android" 
    android:id ="@+id/fragment_container" 
    android:layout_width = match_parent" 
    android:layout_height ="match_parent" /&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-org4fd0e06" class="outline-3">
<h3 id="org4fd0e06"><span class="section-number-3">3.2</span> Adding fragments</h3>
<div class="outline-text-3" id="text-3-2">
</div>
<div id="outline-container-orge8a5e03" class="outline-4">
<h4 id="orge8a5e03"><span class="section-number-4">3.2.1</span> Defining the look-and-feel of a fragment</h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
Create our first fragment for the master view.   Right-click the
"res/layout" entry in the project file and select "New-&gt;Layout
Rsource File"
</p>

<p>
Leave the values in the LinearLayout as is and add a TextView field
with an id of "@+id/student_name".
</p>

<p>
Put an EditText field below the with an id of "@+id/student_grade".
</p>

<p>
Add a GridLayout.   Add two buttons: a previous button and a next
button. Create two strings for the button text: "Prev" and "Next".
</p>

<p>
Your fragment layout XML should look like this:
</p>
<div class="org-src-container">
<pre class="src src-xml"><span style="color: #8b2252;">&lt;?</span><span style="color: #a020f0;">xml</span><span style="color: #8b2252;"> </span><span style="color: #8b2252;">version="1.0" encoding="utf-8"</span><span style="color: #8b2252;">?&gt;</span>
&lt;<span style="color: #0000ff;">RelativeLayout</span> <span style="color: #483d8b;">xmlns</span>:<span style="color: #a0522d;">android</span>=<span style="color: #8b2252;">"http://schemas.android.com/apk/res/android"</span>
    <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">layout_width</span>=<span style="color: #8b2252;">"match_parent"</span>
    <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">layout_height</span>=<span style="color: #8b2252;">"match_parent"</span>
    <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">paddingLeft</span>=<span style="color: #8b2252;">"16dp"</span>
    <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">paddingRight</span>=<span style="color: #8b2252;">"16dp"</span>&gt;
    &lt;<span style="color: #0000ff;">TextView</span>
        <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">id</span>=<span style="color: #8b2252;">"@+id/student_name"</span>
        <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">layout_width</span>=<span style="color: #8b2252;">"match_parent"</span>
        <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">layout_height</span>=<span style="color: #8b2252;">"wrap_content"</span> /&gt;
    &lt;<span style="color: #0000ff;">EditText</span>
        <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">id</span>=<span style="color: #8b2252;">"@+id/student_grade"</span>
        <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">layout_width</span>=<span style="color: #8b2252;">"match_parent"</span>
        <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">layout_height</span>=<span style="color: #8b2252;">"wrap_content"</span>
        <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">layout_alignParentLeft</span>=<span style="color: #8b2252;">"true"</span>
        <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">layout_below</span>=<span style="color: #8b2252;">"@id/student_name"</span>
        <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">imeOptions</span>=<span style="color: #8b2252;">"actionGo"</span>
        <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">inputType</span>=<span style="color: #8b2252;">"number"</span>
        <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">maxLines</span>=<span style="color: #8b2252;">"1"</span>/&gt;
    &lt;<span style="color: #0000ff;">GridLayout</span>
        <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">layout_width</span>=<span style="color: #8b2252;">"match_parent"</span>
        <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">layout_height</span>=<span style="color: #8b2252;">"match_parent"</span>
        <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">layout_alignParentRight</span>=<span style="color: #8b2252;">"true"</span>
        <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">layout_below</span>=<span style="color: #8b2252;">"@id/student_grade"</span>&gt;
        &lt;<span style="color: #0000ff;">Button</span>
            <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">id</span>=<span style="color: #8b2252;">"@+id/prev_student"</span>
            <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">layout_gravity</span>=<span style="color: #8b2252;">"left"</span>
            <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">text</span>=<span style="color: #8b2252;">"@string/strPrev"</span> /&gt;
        &lt;<span style="color: #0000ff;">Button</span>
            <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">id</span>=<span style="color: #8b2252;">"@+id/next_student"</span>
            <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">layout_gravity</span>=<span style="color: #8b2252;">"right"</span>
            <span style="color: #483d8b;">android</span>:<span style="color: #a0522d;">text</span>=<span style="color: #8b2252;">"@string/strNext"</span> /&gt;
    &lt;/<span style="color: #0000ff;">GridLayout</span>&gt;
&lt;/<span style="color: #0000ff;">RelativeLayout</span>&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-org23e015a" class="outline-4">
<h4 id="org23e015a"><span class="section-number-4">3.2.2</span> Implementing the "code-behind"</h4>
<div class="outline-text-4" id="text-3-2-2">
<p>
Right click on the source package file to add a new class.    Name
the class "StudentMasterFragment" and click on OK to generate the
class.
</p>

<p>
Change the parent of this class to be Fragment.   Add two member
variables: a variable for the student name text field and a variable
for the student grade text field.
</p>

<p>
Use AndroidStudio's code generation tools to add templates for the
OnCreate() and OnCreateView() methods of the Fragment.
</p>

<p>
The heavy lifting will occur in the OnCreateView() method.  Start by
inflating the contents of the view.  
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">View</span> <span style="color: #a0522d;">v</span> = inflater.inflate(R.layout.studentmaster,container,<span style="color: #008b8b;">false</span>);
</pre>
</div>

<p>
Now we get do the code-behind for the fields on the view.  First, we
get references to the text view and edit text objects:
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #b22222;">// </span><span style="color: #b22222;">Wire the edit text</span>
       studentEntryField = (<span style="color: #228b22;">TextView</span>) v.findViewById(R.id.student_name);

       studentGradeField = (<span style="color: #228b22;">EditText</span>) v.findViewById(R.id.student_grade);
</pre>
</div>

<p>
We need to be made aware of when the user decides that they have
finished editing the grade field.  We have configured the
edit field in this lab so that you receive different events for the
two cases we have to process.  The first case is when the user
selects enter in the on-screen keyboard.  In this case, we must
respond to an ACTION_DONE event within the input editor:
</p>
<div class="org-src-container">
<pre class="src src-java">studentGradeField.setOnEditorActionListener(<span style="color: #a020f0;">new</span> <span style="color: #008b8b;">TextView</span>.<span style="color: #228b22;">OnEditorActionListener</span>() {
  <span style="color: #008b8b;">@Override</span>
  <span style="color: #a020f0;">public</span> <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">onEditorAction</span>(<span style="color: #228b22;">TextView</span> <span style="color: #a0522d;">textView</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">imeEvent</span>, <span style="color: #228b22;">KeyEvent</span> <span style="color: #a0522d;">keyEvent</span>) {
    <span style="color: #a020f0;">if</span> (imeEvent == <span style="color: #008b8b;">EditorInfo</span>.IME_ACTION_GO) {
      updateText(textView);
    }
    <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">false</span>;
  }
});
</pre>
</div>

<p>
The second case involves when a user is working with an attached
keyboard or is using a device with a "D-pad" input.  Android is a bit
foob'ed up in this regard so that one has to listen for the key press
events in this case:
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #b22222;">// </span><span style="color: #b22222;">Now add a listener for pressing the enter key</span>
studentGradeField.setOnKeyListener(<span style="color: #a020f0;">new</span> <span style="color: #008b8b;">View</span>.<span style="color: #228b22;">OnKeyListener</span>() {
     <span style="color: #008b8b;">@Override</span>
     <span style="color: #a020f0;">public</span> <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">onKey</span>(<span style="color: #228b22;">View</span> <span style="color: #a0522d;">v</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">keyCode</span>, <span style="color: #228b22;">KeyEvent</span> <span style="color: #a0522d;">event</span>) {
       <span style="color: #a020f0;">if</span> (event.getAction() == <span style="color: #008b8b;">KeyEvent</span>.ACTION_DOWN) {
          <span style="color: #a020f0;">switch</span> (keyCode) {
             <span style="color: #a020f0;">case</span> <span style="color: #008b8b;">KeyEvent</span>.KEYCODE_DPAD_CENTER:
             <span style="color: #a020f0;">case</span> <span style="color: #008b8b;">KeyEvent</span>.KEYCODE_ENTER:
                  updateText((<span style="color: #228b22;">TextView</span>) v);
                  <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">true</span>;
             <span style="color: #a020f0;">default</span>:
                  <span style="color: #a020f0;">break</span>;
             }
       }
      <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">false</span>;
     }
});
</pre>
</div>

<p>
Now that the listeners are in place, we can complete our override of
OnCreateView() by doing the things we need to do to get the first
piece of data from the model:
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">String</span> <span style="color: #a0522d;">firstStudent</span> = myCohort.getAStudent();
studentEntryField.setText(firstStudent);
studentGradeField.setText(myCohort.getStudentGrade(firstStudent).toString());
<span style="color: #a020f0;">return</span> v;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc8323b2" class="outline-3">
<h3 id="orgc8323b2"><span class="section-number-3">3.3</span> Expanding the model</h3>
<div class="outline-text-3" id="text-3-3">
<p>
To this point, we've been using a single object as the model for our
application. A more accurate representation is to have some form of
composite data structure.
</p>

<p>
In your Glorious Instructor's case, we are working with "cohorts" of
students.  In our application, the Cohort class will represent the
people taking the class.
</p>

<p>
Add a new class to your project named Cohort.   A cohort will
maintain a java Map object (think dictionary with student names as
keys and grades as values) that will be private to the class:
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">Cohort</span> {
    <span style="color: #a020f0;">public</span> <span style="color: #a020f0;">static</span> <span style="color: #228b22;">Cohort</span> <span style="color: #a0522d;">sCohort</span>;
    <span style="color: #a020f0;">private</span> <span style="color: #228b22;">HashMap</span>&lt;<span style="color: #228b22;">String</span>, <span style="color: #228b22;">Integer</span>&gt; <span style="color: #a0522d;">studentMap</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">HashMap</span>&lt;<span style="color: #228b22;">String</span>, <span style="color: #228b22;">Integer</span>&gt;();
    <span style="color: #a020f0;">private</span> <span style="color: #0000ff;">Cohort</span>() {
        <span style="color: #b22222;">// </span><span style="color: #b22222;">TODO: Put test data into the list for now</span>
        studentMap.put(<span style="color: #8b2252;">"Lewis"</span>,40);
        studentMap.put(<span style="color: #8b2252;">"Alpha"</span>,100);
        studentMap.put(<span style="color: #8b2252;">"Smith"</span>,10);
        studentMap.put(<span style="color: #8b2252;">"Jones"</span>,92);
    }
    <span style="color: #a020f0;">public</span> <span style="color: #a020f0;">static</span> <span style="color: #228b22;">Cohort</span> <span style="color: #0000ff;">getCohort</span>() {
        <span style="color: #a020f0;">if</span> (sCohort == <span style="color: #008b8b;">null</span>) {
            sCohort = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Cohort</span>();
        }
        <span style="color: #a020f0;">return</span> sCohort;
    }
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Integer</span> <span style="color: #0000ff;">getStudentGrade</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>) {
        <span style="color: #a020f0;">return</span> studentMap.get(name);
    }
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">addStudent</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>, <span style="color: #228b22;">Integer</span> <span style="color: #a0522d;">grade</span>) {
        studentMap.put(name,grade);
    }
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">setGrade</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>, <span style="color: #228b22;">Integer</span> <span style="color: #a0522d;">grade</span>) {
        studentMap.put(name,grade);
    }
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Boolean</span> <span style="color: #0000ff;">contains</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>) {
        <span style="color: #a020f0;">return</span> studentMap.containsKey(name);
    }
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">String</span> <span style="color: #0000ff;">getAStudent</span>() {
        <span style="color: #228b22;">Set</span>&lt;<span style="color: #228b22;">String</span>&gt; <span style="color: #a0522d;">keys</span> = studentMap.keySet();
        <span style="color: #228b22;">TreeSet</span>&lt;<span style="color: #228b22;">String</span>&gt; <span style="color: #a0522d;">keysInTree</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">TreeSet</span>&lt;<span style="color: #228b22;">String</span>&gt;(keys);
        <span style="color: #a020f0;">return</span> (<span style="color: #228b22;">String</span>) keysInTree.first();
    }
}
</pre>
</div>

<p>
Note some things about the Cohort class.   It implements the
Singleton pattern: only one instance of this class can exist within
the application.  Note also it implements the Facade design pattern:
clients don't need to know that we are using a HashMap to store
student information.   I can change the implementation without having
to change the clients.
</p>

<p>
The getAStudent() method is a strange beast due to some of the
oddities of the Java dictionary classes.  To get an entry without
knowing a key one must copy the keys into a Set, move that Set into a
TreeSet, and then return back the first entry in that TreeSet.
</p>
</div>
<div id="outline-container-orga95ca46" class="outline-4">
<h4 id="orga95ca46"><span class="section-number-4">3.3.1</span> Now back to our Fragment for the momement</h4>
<div class="outline-text-4" id="text-3-3-1">
<p>
The event listeners in the fragment use a helper method to update
the student grade.  Now that we have the Cohort class, we can
provide that method:
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">private</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">updateText</span>(<span style="color: #228b22;">TextView</span> <span style="color: #a0522d;">textView</span>) {
  <span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span> = studentEntryField.getText().toString();
  <span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span> = textView.getText().toString();
  <span style="color: #228b22;">Integer</span> <span style="color: #a0522d;">grade</span> = Integer.parseInt(s);
  <span style="color: #a020f0;">if</span> (myCohort.contains(name)) {
      myCohort.setGrade(name, grade);
      Toast.makeText(getActivity(), R.string.strExistsWarning, <span style="color: #008b8b;">Toast</span>.LENGTH_LONG).show();
  } <span style="color: #a020f0;">else</span> {
      myCohort.addStudent(name, grade);
      Toast.makeText(getActivity(), R.string.strNotExistsAdded, <span style="color: #008b8b;">Toast</span>.LENGTH_LONG).show();
  }
}
</pre>
</div>

<p>
Note the use of a Toast to indicate what transpired. Providing some
level of feedback to user about your app has done is a good habit to
develop. 
</p>
</div>
</div>
</div>
<div id="outline-container-org791f3b8" class="outline-3">
<h3 id="org791f3b8"><span class="section-number-3">3.4</span> And now we add modify the activity</h3>
<div class="outline-text-3" id="text-3-4">
<p>
We need to modify the activity's onCreate() to load our Fragment into
its FrameLayout:
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">protected</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">onCreate</span>(<span style="color: #228b22;">Bundle</span> <span style="color: #a0522d;">savedInstanceState</span>) {
  <span style="color: #a020f0;">super</span>.onCreate(savedInstanceState);
  setContentView(R.layout.activity_grade);
  <span style="color: #228b22;">FragmentManager</span> <span style="color: #a0522d;">fm</span> = getFragmentManager();
  <span style="color: #228b22;">Fragment</span> <span style="color: #a0522d;">fragment</span> = fm.findFragmentById(R.id.fragment_container);
  <span style="color: #a020f0;">if</span> (fragment == <span style="color: #008b8b;">null</span>) {
   fragment = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">StudentMasterFragment</span>();
   fm.beginTransaction()
     .add(R.id.fragment_container,fragment)
     .commit();
  }
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orge4d9845" class="outline-2">
<h2 id="orge4d9845"><span class="section-number-2">4</span> Submit your lab for grading</h2>
<div class="outline-text-2" id="text-4">
<p>
Build a ZIP file containing your project and upload the resulting PDF
file to Blackboard by attaching it to the lab's entry on the
course web page.
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2012-08-20 Mon</p>
<p class="author">Author: Adam Lewis</p>
<p class="date">Created: 2019-02-22 Fri 11:58</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
